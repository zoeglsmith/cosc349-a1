# Dockerfile for Backend Server (VM2)
FROM node:14-alpine

WORKDIR /app

COPY package*.json ./
RUN npm install

COPY . .

# Install the MongoDB client
RUN apk --no-cache add mongodb-tools

# Add a startup script to preload test data and start the server
COPY preload-data.sh /app/preload-data.sh
RUN chmod +x /app/preload-data.sh

EXPOSE 5000

# Start the application using the preload script
CMD ["./preload-data.sh"]
